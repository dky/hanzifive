(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{171:(e,s,r)=>{Promise.resolve().then(r.bind(r,8103))},8103:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>N});var a=r(5155),c=r(2115),l=r(1641),t=r(5731),n=r(221),d=r(2177),i=r(5594),o=r(285),m=r(6695);let x=i.z.object({name:i.z.string().min(1,"Deck name is required"),description:i.z.string().optional()});function u(e){let{onSubmit:s}=e,[r,l]=(0,c.useState)(!1),{register:t,handleSubmit:i,reset:u,formState:{errors:h}}=(0,d.mN)({resolver:(0,n.u)(x),defaultValues:{name:"",description:""}}),j=async e=>{l(!0);try{await s(e),u()}catch(e){console.error("Error creating deck:",e)}finally{l(!1)}};return(0,a.jsxs)(m.Zp,{className:"w-full max-w-md",children:[(0,a.jsx)(m.aR,{children:(0,a.jsx)(m.ZB,{children:"Create New Deck"})}),(0,a.jsx)(m.Wu,{children:(0,a.jsxs)("form",{onSubmit:i(j),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Deck Name"}),(0,a.jsx)("input",{id:"name",...t("name"),className:"w-full p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",placeholder:"e.g. HSK Level 1"}),h.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:h.name.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description (Optional)"}),(0,a.jsx)("textarea",{id:"description",...t("description"),className:"w-full p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",rows:3,placeholder:"Enter a description for this deck"})]}),(0,a.jsx)(o.$,{type:"submit",className:"w-full",disabled:r,children:r?"Creating...":"Create Deck"})]})})]})}var h=r(7300),j=r(6874),f=r.n(j),p=r(3568);function N(){let[e,s]=(0,c.useState)([]),[r,n]=(0,c.useState)(!0),[d,i]=(0,c.useState)(null),[x,j]=(0,c.useState)(!1),[N,y]=(0,c.useState)(null),[g,k]=(0,c.useState)(!1);(0,c.useEffect)(()=>{b()},[]);let b=async()=>{n(!0);try{let e=await (0,t.Br)();s(e),i(null)}catch(e){console.error("Error loading decks:",e),i("Failed to load decks. Please try again later.")}finally{n(!1)}},v=async e=>{try{return await (0,t.Ul)(e),p.Ay.success("Deck created successfully"),b(),Promise.resolve()}catch(e){return console.error("Error creating deck:",e),p.Ay.error("Failed to create deck"),Promise.reject(e)}},w=e=>{y(e),j(!0)},S=async(e,s)=>{k(!0);try{console.log("Attempting to rename deck ".concat(e,' to "').concat(s,'"'));let r=await (0,t.Xj)(e,{name:s});return console.log("Rename success:",r),p.Ay.success("Deck renamed successfully"),b(),Promise.resolve()}catch(e){return console.error("Error renaming deck:",e),e instanceof Error?p.Ay.error("Failed to rename deck: ".concat(e.message)):p.Ay.error("Failed to rename deck"),Promise.reject(e)}finally{k(!1)}};return(0,a.jsx)(l.$,{children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,a.jsxs)("div",{className:"md:w-1/3",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Decks"}),(0,a.jsx)(u,{onSubmit:v})]}),(0,a.jsxs)("div",{className:"md:w-2/3",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Your Decks"}),r?(0,a.jsx)("div",{className:"py-12 text-center",children:"Loading decks..."}):d?(0,a.jsx)("div",{className:"py-12 text-center text-red-500",children:d}):0===e.length?(0,a.jsx)("div",{className:"bg-blue-50 p-6 rounded-lg text-center",children:(0,a.jsx)("p",{children:"You haven't created any decks yet. Get started by creating your first deck!"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,a.jsxs)(m.Zp,{className:"h-full flex flex-col",children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:e.name}),(0,a.jsx)(m.BT,{children:e.description||"No description provided"})]}),(0,a.jsx)(m.Wu,{className:"flex-grow",children:(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[e.cardCount," ",1===e.cardCount?"card":"cards"]})}),(0,a.jsxs)("div",{className:"p-4 pt-0 border-t mt-auto",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsx)(f(),{href:"/decks/".concat(e.id),className:"flex-1",children:(0,a.jsx)(o.$,{variant:"outline",className:"w-full",children:"Manage"})}),(0,a.jsx)(f(),{href:"/study/".concat(e.id),className:"flex-1",children:(0,a.jsx)(o.$,{className:"w-full",children:"Study"})})]}),(0,a.jsx)(o.$,{variant:"ghost",className:"w-full text-sm",onClick:()=>w(e),children:"Rename"})]})]},e.id))})]})]}),N&&(0,a.jsx)(h.N,{deckId:N.id,currentName:N.name,isOpen:x,onClose:()=>{j(!1),y(null)},onRename:S})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[37,381,568,961,756,940,441,684,358],()=>s(171)),_N_E=e.O()}]);