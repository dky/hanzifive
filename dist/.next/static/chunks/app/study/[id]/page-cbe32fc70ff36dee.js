(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{285:(e,s,a)=>{"use strict";a.d(s,{$:()=>d});var t=a(5155),r=a(2115),n=a(9708),i=a(2085),l=a(9434);let c=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-500 text-white hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700",destructive:"bg-red-500 text-white hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",ghost:"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",link:"text-blue-500 underline-offset-4 hover:underline dark:text-blue-400"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:a,variant:r,size:i,asChild:d=!1,...o}=e,h=d?n.Slot:"button";return(0,t.jsx)(h,{className:(0,l.cn)(c({variant:r,size:i,className:a})),ref:s,...o})});d.displayName="Button"},1641:(e,s,a)=>{"use strict";a.d(s,{$:()=>o});var t=a(5155),r=a(6874),n=a.n(r),i=a(5695),l=a(2115);let c=[{name:"Home",href:"/"},{name:"Flashcards",href:"/flashcards"},{name:"Decks",href:"/decks"},{name:"Study",href:"/study"},{name:"Sessions",href:"/study-sessions"}];function d(){let e=(0,i.usePathname)(),[s,a]=(0,l.useState)(!1);return(0,t.jsxs)("header",{className:"bg-white dark:bg-gray-900 shadow-sm",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)(n(),{href:"/",className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"汉字卡片"})}),(0,t.jsx)("nav",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:c.map(s=>(0,t.jsx)(n(),{href:s.href,className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium h-16 ".concat(e===s.href?"border-blue-500 text-gray-900 dark:text-white":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-300 dark:hover:border-gray-600 dark:hover:text-gray-200"),children:s.name},s.name))})]}),(0,t.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center"}),(0,t.jsx)("div",{className:"-mr-2 flex items-center sm:hidden",children:(0,t.jsxs)("button",{type:"button",onClick:()=>{a(!s)},className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-expanded":s,children:[(0,t.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,t.jsx)("svg",{className:"".concat(s?"hidden":"block"," h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),(0,t.jsx)("svg",{className:"".concat(s?"block":"hidden"," h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})})]})}),(0,t.jsx)("div",{className:"".concat(s?"block":"hidden"," sm:hidden"),children:(0,t.jsx)("div",{className:"pt-2 pb-3 space-y-1",children:c.map(s=>(0,t.jsx)(n(),{href:s.href,className:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium ".concat(e===s.href?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:border-gray-700 dark:hover:text-gray-200"),onClick:()=>a(!1),children:s.name},s.name))})})]})}function o(e){let{children:s}=e;return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)(d,{}),(0,t.jsx)("main",{className:"flex-1",children:s}),(0,t.jsx)("footer",{className:"bg-gray-100 dark:bg-gray-800 py-6",children:(0,t.jsx)("div",{className:"container mx-auto px-6 text-center text-gray-500 dark:text-gray-400 text-sm",children:(0,t.jsx)("p",{children:"Chinese Flashcards App - Learn Chinese characters efficiently"})})})]})}},3048:(e,s,a)=>{Promise.resolve().then(a.bind(a,7550))},5731:(e,s,a)=>{"use strict";async function t(e){if(!e.ok){let s=await e.json().catch(()=>null);throw Error((null==s?void 0:s.message)||e.statusText||"Something went wrong")}return e.json()}async function r(){return t(await fetch("/api/flashcards"))}async function n(e){return t(await fetch("/api/flashcards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))}async function i(e,s){return t(await fetch("/api/flashcards/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))}async function l(e){return t(await fetch("/api/flashcards/".concat(e),{method:"DELETE"}))}async function c(){return t(await fetch("/api/tags"))}async function d(){return t(await fetch("/api/decks"))}async function o(e){return t(await fetch("/api/decks/".concat(e)))}async function h(e){return t(await fetch("/api/decks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))}async function x(e,s){return t(await fetch("/api/decks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))}async function m(e,s){return t(await fetch("/api/decks/".concat(e,"/cards"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flashcardId:s})}))}async function u(e,s){return t(await fetch("/api/decks/".concat(e,"/cards/").concat(s),{method:"DELETE"}))}async function f(e,s){return t(await fetch("/api/decks/".concat(e,"/cards/byTag"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:s})}))}async function y(e){return t(await fetch("/api/study-sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))}async function g(){return t(await fetch("/api/study-sessions"))}async function p(e){return t(await fetch("/api/decks/".concat(e,"/study-sessions")))}a.d(s,{Br:()=>d,IF:()=>i,Q2:()=>c,Ul:()=>h,XS:()=>n,Xj:()=>x,aP:()=>m,eb:()=>l,gI:()=>p,gW:()=>f,hW:()=>g,k2:()=>o,kE:()=>y,qF:()=>u,sy:()=>r})},6695:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>l});var t=a(5155),r=a(2115),n=a(9434);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-white text-gray-950 shadow-sm dark:border-gray-800 dark:bg-gray-900 dark:text-gray-50",a),...r})});i.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-gray-500 dark:text-gray-400",a),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},7550:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var t=a(5155),r=a(2115),n=a(5695),i=a(1641),l=a(5731),c=a(285),d=a(6695);function o(e){let s,a,{id:n,character:i,pinyin:l,meaning:o,mode:h,onResult:x}=e,[m,u]=(0,r.useState)(!1);switch((0,r.useEffect)(()=>{u(!1)},[n]),h){case"normal":s=(0,t.jsx)("div",{className:"text-6xl",children:i}),a=(0,t.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,t.jsx)("div",{className:"text-xl",children:l}),(0,t.jsx)("div",{className:"text-2xl",children:o})]});break;case"reverse":s=(0,t.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,t.jsx)("div",{className:"text-xl",children:l}),(0,t.jsx)("div",{className:"text-2xl",children:o})]}),a=(0,t.jsx)("div",{className:"text-6xl",children:i});break;case"meaningOnly":s=(0,t.jsx)("div",{className:"text-2xl",children:o}),a=(0,t.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,t.jsx)("div",{className:"text-6xl",children:i}),(0,t.jsx)("div",{className:"text-xl",children:l})]})}return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6 w-full max-w-lg",children:[(0,t.jsx)("div",{className:"w-full perspective-1000",children:(0,t.jsxs)("div",{className:"relative w-full h-80 cursor-pointer transition-transform duration-500 transform-style-3d ".concat(m?"rotate-y-180":""),onClick:()=>u(!m),children:[(0,t.jsx)(d.Zp,{className:"absolute w-full h-full backface-hidden",children:(0,t.jsx)(d.Wu,{className:"flex items-center justify-center h-full",children:s})}),(0,t.jsx)(d.Zp,{className:"absolute w-full h-full backface-hidden rotate-y-180",children:(0,t.jsx)(d.Wu,{className:"flex items-center justify-center h-full",children:a})})]})}),m&&(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(c.$,{variant:"destructive",onClick:()=>x(!1),children:"Incorrect"}),(0,t.jsx)(c.$,{variant:"default",onClick:()=>x(!0),children:"Correct"})]})]})}function h(e){let{deck:s,flashcards:a,onComplete:n}=e,[i,l]=(0,r.useState)(0),[h,x]=(0,r.useState)(0),[m,u]=(0,r.useState)(0),[f,y]=(0,r.useState)([]),[g,p]=(0,r.useState)("normal"),[v,j]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1),[k,w]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!0);(0,r.useEffect)(()=>{p("normal"),localStorage.setItem("studyMode","normal"),y([...a].sort(()=>Math.random()-.5))},[a]),(0,r.useEffect)(()=>{0!==f.length&&(localStorage.setItem("studyMode",g),y([...a].sort(()=>Math.random()-.5)),l(0),x(0),u(0),j(!1))},[g]);let T=async()=>{N(!0);try{await n(h,m)}catch(e){console.error("Error saving study session:",e)}finally{N(!1)}},O=e=>{console.log("Setting mode to: ".concat(e)),p(e)};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)(d.Zp,{className:"mb-6",children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)(d.ZB,{children:["Studying: ",s.name]})}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:s.description||"No description provided."})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,t.jsxs)(c.$,{variant:"normal"===g?"default":"outline",onClick:()=>O("normal"),disabled:b,children:["normal"===g?"✓ ":"","Normal Mode"]}),(0,t.jsxs)(c.$,{variant:"reverse"===g?"default":"outline",onClick:()=>O("reverse"),disabled:b,children:["reverse"===g?"✓ ":"","Reverse Mode"]}),(0,t.jsxs)(c.$,{variant:"meaningOnly"===g?"default":"outline",onClick:()=>O("meaningOnly"),disabled:b,children:["meaningOnly"===g?"✓ ":"","Meaning Only"]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:["normal"===g&&"Shows Chinese character first, guess the meaning.","reverse"===g&&"Shows meaning first, guess the Chinese character.","meaningOnly"===g&&"Shows meaning only, guess both character and pronunciation."]}),(0,t.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Progress:"})," ",i+1," / ",f.length]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-green-600",children:"Correct:"})," ",h]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-red-600",children:"Incorrect:"})," ",m]})]})]})]})]}),!v&&f.length>0?(0,t.jsx)("div",{className:"flex justify-center min-h-[400px]",children:k?(0,t.jsx)("div",{className:"flex items-center justify-center w-full max-w-lg",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading next card..."})}):S?(0,t.jsx)(o,{id:f[i].id,character:f[i].character,pinyin:f[i].pinyin,meaning:f[i].meaning,mode:g,onResult:e=>{e?x(e=>e+1):u(e=>e+1),i<f.length-1?(w(!0),C(!1),setTimeout(()=>{l(e=>e+1),setTimeout(()=>{C(!0),w(!1)},50)},200)):j(!0)}}):null}):(0,t.jsx)(d.Zp,{children:(0,t.jsx)(d.Wu,{className:"py-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Session Complete!"}),(0,t.jsxs)("div",{className:"flex justify-center gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-green-600",children:h}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Correct"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl font-bold text-red-600",children:m}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Incorrect"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-4xl font-bold",children:[Math.round(h/(h+m||1)*100),"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Success Rate"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,t.jsx)(c.$,{variant:"outline",onClick:()=>{y([...a].sort(()=>Math.random()-.5)),l(0),x(0),u(0),j(!1),C(!0)},disabled:b,children:"Restart Session"}),(0,t.jsx)(c.$,{onClick:T,disabled:b,children:b?"Saving...":"Save Results"})]})]})})})]})}var x=a(6874),m=a.n(x),u=a(3568);function f(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),a=e.id,[d,o]=(0,r.useState)(null),[x,f]=(0,r.useState)(!0),[y,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{p()},[a]);let p=async()=>{f(!0);try{let e=await (0,l.k2)(a);o(e),0===e.flashcards.length?g("This deck has no flashcards. Add some cards to the deck before studying."):g(null)}catch(e){console.error("Error loading deck:",e),g("Failed to load deck. Please try again later.")}finally{f(!1)}},v=async(e,t)=>{try{let r=localStorage.getItem("studyMode")||"normal";return await (0,l.kE)({deckId:a,correct:e,incorrect:t,studyMode:r}),u.Ay.success("Study session saved successfully"),s.push("/decks/".concat(a,"/history")),Promise.resolve()}catch(e){return console.error("Error saving study session:",e),u.Ay.error("Failed to save study session"),Promise.reject(e)}};return x?(0,t.jsx)(i.$,{children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8 text-center",children:"Loading deck information..."})}):y||!d?(0,t.jsx)(i.$,{children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("div",{className:"text-center text-red-500 mb-4",children:y||"Deck not found"}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(m(),{href:"/decks",children:(0,t.jsx)(c.$,{children:"Go back to decks"})})})]})}):(0,t.jsx)(i.$,{children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)(h,{deck:d,flashcards:d.flashcards,onComplete:v})})})}},9434:(e,s,a)=>{"use strict";a.d(s,{cn:()=>n});var t=a(2596),r=a(9688);function n(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[37,381,568,441,684,358],()=>s(3048)),_N_E=e.O()}]);