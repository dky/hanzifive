(()=>{var e={};e.id=103,e.ids=[103],e.modules={734:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var r=s(5239),t=s(8088),n=s(8170),i=s.n(n),d=s(893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(a,l);let c={children:["",{children:["decks",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6771)),"/Users/evangelosmeklis/hanzifive/src/app/decks/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"/Users/evangelosmeklis/hanzifive/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/evangelosmeklis/hanzifive/src/app/decks/[id]/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/decks/[id]/page",pathname:"/decks/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5605:(e,a,s)=>{Promise.resolve().then(s.bind(s,6771))},5877:(e,a,s)=>{Promise.resolve().then(s.bind(s,8263))},6771:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/evangelosmeklis/hanzifive/src/app/decks/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/evangelosmeklis/hanzifive/src/app/decks/[id]/page.tsx","default")},8263:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var r=s(687),t=s(3210),n=s(6189),i=s(4074),d=s(2185),l=s(9523),c=s(4493);function o({deck:e,availableFlashcards:a,availableTags:s,onAddCard:n,onRemoveCard:i,onAddCardsByTag:d}){let[o,m]=(0,t.useState)(""),[x,h]=(0,t.useState)(!1),[u,p]=(0,t.useState)(!1),[f,g]=(0,t.useState)(1),[j,v]=(0,t.useState)(1),[y,b]=(0,t.useState)(5),k=a.filter(a=>!e.flashcards.some(e=>e.id===a.id)),N=async e=>{h(!0);try{await n(e)}catch(e){console.error("Error adding card to deck:",e)}finally{h(!1)}},w=async e=>{p(!0);try{await i(e)}catch(e){console.error("Error removing card from deck:",e)}finally{p(!1)}},C=async()=>{if(o){h(!0);try{await d(o),m("")}catch(e){console.error("Error adding cards by tag:",e)}finally{h(!1)}}},P=f*y,A=e.flashcards.slice(P-y,P),$=Math.ceil(e.flashcards.length/y),S=j*y,z=k.slice(S-y,S),E=Math.ceil(k.length/y);return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsxs)(c.ZB,{children:["Deck: ",e.name]})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:e.description||"No description provided."}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Add Cards by Tag"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"flex-1 p-2 border rounded-md",children:[(0,r.jsx)("option",{value:"",children:"Select a tag"}),s.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)(l.$,{onClick:C,disabled:!o||x,children:x?"Adding...":"Add"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-2",children:["Cards in Deck (",e.flashcards.length,")"]}),0===e.flashcards.length?(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No cards in this deck yet."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid gap-2",children:A.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded-md",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold",children:e.character}),(0,r.jsxs)("div",{className:"text-sm",children:[e.pinyin," - ",e.meaning]}),e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.tags.map(e=>(0,r.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full text-xs",children:e},e))})]}),(0,r.jsx)(l.$,{variant:"destructive",size:"sm",onClick:()=>w(e.id),disabled:u,children:"Remove"})]},e.id))}),$>1&&(0,r.jsxs)("div",{className:"mt-4 flex justify-center items-center gap-2",children:[(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>g(e=>Math.max(e-1,1)),disabled:1===f,children:"←"}),(0,r.jsxs)("span",{className:"text-sm",children:["Page ",f," of ",$]}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>g(e=>Math.min(e+1,$)),disabled:f===$,children:"→"})]}),(0,r.jsxs)("div",{className:"mt-2 flex justify-center items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Cards per page:"}),(0,r.jsxs)("select",{value:y,onChange:e=>{b(Number(e.target.value)),g(1),v(1)},className:"p-1 border rounded-md text-sm",children:[(0,r.jsx)("option",{value:3,children:"3"}),(0,r.jsx)("option",{value:5,children:"5"}),(0,r.jsx)("option",{value:10,children:"10"}),(0,r.jsx)("option",{value:20,children:"20"})]})]})]})]}),k.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-2",children:["Available Cards to Add (",k.length,")"]}),(0,r.jsx)("div",{className:"grid gap-2",children:z.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded-md",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold",children:e.character}),(0,r.jsxs)("div",{className:"text-sm",children:[e.pinyin," - ",e.meaning]}),e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.tags.map(e=>(0,r.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full text-xs",children:e},e))})]}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>N(e.id),disabled:x,children:"Add"})]},e.id))}),E>1&&(0,r.jsxs)("div",{className:"mt-4 flex justify-center items-center gap-2",children:[(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>v(e=>Math.max(e-1,1)),disabled:1===j,children:"←"}),(0,r.jsxs)("span",{className:"text-sm",children:["Page ",j," of ",E]}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>v(e=>Math.min(e+1,E)),disabled:j===E,children:"→"})]})]})]})]})})}var m=s(9891),x=s(5814),h=s.n(x),u=s(7590);function p(){let e=(0,n.useParams)();(0,n.useRouter)();let a=e.id,[s,c]=(0,t.useState)(null),[x,p]=(0,t.useState)([]),[f,g]=(0,t.useState)([]),[j,v]=(0,t.useState)(!0),[y,b]=(0,t.useState)(null),[k,N]=(0,t.useState)(!1),[w,C]=(0,t.useState)(!1),P=async()=>{v(!0);try{let[e,s,r]=await Promise.all([(0,d.k2)(a),(0,d.sy)(),(0,d.Q2)()]);c(e),p(s),g(r.map(e=>e.name)),b(null)}catch(e){console.error("Error loading data:",e),b("Failed to load data. Please try again later.")}finally{v(!1)}},A=async e=>{try{return await (0,d.aP)(a,e),u.Ay.success("Card added to deck"),await P(),Promise.resolve()}catch(e){return console.error("Error adding card to deck:",e),u.Ay.error("Failed to add card to deck"),Promise.reject(e)}},$=async e=>{try{return await (0,d.qF)(a,e),u.Ay.success("Card removed from deck"),await P(),Promise.resolve()}catch(e){return console.error("Error removing card from deck:",e),u.Ay.error("Failed to remove card from deck"),Promise.reject(e)}},S=async e=>{try{let s=await (0,d.gW)(a,e);return u.Ay.success(s.message),await P(),Promise.resolve()}catch(e){return console.error("Error adding cards by tag:",e),u.Ay.error("Failed to add cards by tag"),Promise.reject(e)}},z=async(e,a)=>{C(!0);try{console.log(`Attempting to rename deck ${e} to "${a}"`);let s=await (0,d.Xj)(e,{name:a});return console.log("Rename success:",s),u.Ay.success("Deck renamed successfully"),await P(),Promise.resolve()}catch(e){return console.error("Error renaming deck:",e),e instanceof Error?u.Ay.error(`Failed to rename deck: ${e.message}`):u.Ay.error("Failed to rename deck"),Promise.reject(e)}finally{C(!1)}};return j?(0,r.jsx)(i.$,{children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 text-center",children:"Loading deck information..."})}):y||!s?(0,r.jsx)(i.$,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("div",{className:"text-center text-red-500 mb-4",children:y||"Deck not found"}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(h(),{href:"/decks",children:(0,r.jsx)(l.$,{children:"Go back to decks"})})})]})}):(0,r.jsx)(i.$,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold",children:["Manage Deck: ",s.name]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>N(!0),children:"Rename"}),(0,r.jsx)(h(),{href:"/decks",children:(0,r.jsx)(l.$,{variant:"outline",children:"Back to Decks"})}),(0,r.jsx)(h(),{href:`/decks/${a}/history`,children:(0,r.jsx)(l.$,{variant:"outline",children:"Study History"})}),(0,r.jsx)(h(),{href:`/study/${a}`,children:(0,r.jsx)(l.$,{children:"Study Deck"})})]})]}),(0,r.jsx)(o,{deck:s,availableFlashcards:x,availableTags:f,onAddCard:A,onRemoveCard:$,onAddCardsByTag:S}),s&&(0,r.jsx)(m.N,{deckId:a,currentName:s.name,isOpen:k,onClose:()=>N(!1),onRename:z})]})})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9891:(e,a,s)=>{"use strict";s.d(a,{N:()=>v});var r=s(687),t=s(3210),n=s(3442),i=s(7605),d=s(5880),l=s(9523),c=s(9101),o=s(4780);let m=c.bL;c.l9;let x=c.ZL;c.bm;let h=t.forwardRef(({className:e,...a},s)=>(0,r.jsx)(c.hJ,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));h.displayName=c.hJ.displayName;let u=t.forwardRef(({className:e,children:a,...s},t)=>(0,r.jsxs)(x,{children:[(0,r.jsx)(h,{}),(0,r.jsx)(c.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:bg-gray-900 dark:border-gray-800 dark:text-white",e),...s,children:a})]}));u.displayName=c.UC.displayName;let p=({className:e,...a})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});p.displayName="DialogHeader";let f=({className:e,...a})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});f.displayName="DialogFooter";let g=t.forwardRef(({className:e,...a},s)=>(0,r.jsx)(c.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));g.displayName=c.hE.displayName,t.forwardRef(({className:e,...a},s)=>(0,r.jsx)(c.VY,{ref:s,className:(0,o.cn)("text-sm text-gray-500 dark:text-gray-400",e),...a})).displayName=c.VY.displayName;let j=d.z.object({name:d.z.string().min(1,"Deck name is required")});function v({deckId:e,currentName:a,isOpen:s,onClose:d,onRename:c}){let[o,x]=(0,t.useState)(!1),{register:h,handleSubmit:v,formState:{errors:y},reset:b}=(0,i.mN)({resolver:(0,n.u)(j),defaultValues:{name:a}}),k=async a=>{x(!0);try{await c(e,a.name),b(),d()}catch(e){console.error("Error renaming deck:",e)}finally{x(!1)}};return(0,r.jsx)(m,{open:s,onOpenChange:d,children:(0,r.jsxs)(u,{className:"sm:max-w-[425px]",children:[(0,r.jsx)(p,{children:(0,r.jsx)(g,{children:"Rename Deck"})}),(0,r.jsxs)("form",{onSubmit:v(k),children:[(0,r.jsx)("div",{className:"grid gap-4 py-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Deck Name"}),(0,r.jsx)("input",{id:"name",...h("name"),className:"w-full p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",placeholder:"Enter new deck name"}),y.name&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:y.name.message})]})}),(0,r.jsxs)(f,{children:[(0,r.jsx)(l.$,{type:"button",variant:"outline",onClick:d,children:"Cancel"}),(0,r.jsx)(l.$,{type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})]})]})]})})}}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[447,838,687,454,105,101,267],()=>s(734));module.exports=r})();