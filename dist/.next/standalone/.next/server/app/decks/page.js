(()=>{var e={};e.id=535,e.ids=[535],e.modules={409:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/evangelosmeklis/hanzifive/src/app/decks/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/evangelosmeklis/hanzifive/src/app/decks/page.tsx","default")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5119:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var r=a(687),t=a(3210),n=a(4074),l=a(2185),i=a(3442),d=a(7605),o=a(5880),c=a(9523),m=a(4493);let p=o.z.object({name:o.z.string().min(1,"Deck name is required"),description:o.z.string().optional()});function x({onSubmit:e}){let[s,a]=(0,t.useState)(!1),{register:n,handleSubmit:l,reset:o,formState:{errors:x}}=(0,d.mN)({resolver:(0,i.u)(p),defaultValues:{name:"",description:""}}),u=async s=>{a(!0);try{await e(s),o()}catch(e){console.error("Error creating deck:",e)}finally{a(!1)}};return(0,r.jsxs)(m.Zp,{className:"w-full max-w-md",children:[(0,r.jsx)(m.aR,{children:(0,r.jsx)(m.ZB,{children:"Create New Deck"})}),(0,r.jsx)(m.Wu,{children:(0,r.jsxs)("form",{onSubmit:l(u),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Deck Name"}),(0,r.jsx)("input",{id:"name",...n("name"),className:"w-full p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",placeholder:"e.g. HSK Level 1"}),x.name&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:x.name.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description (Optional)"}),(0,r.jsx)("textarea",{id:"description",...n("description"),className:"w-full p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",rows:3,placeholder:"Enter a description for this deck"})]}),(0,r.jsx)(c.$,{type:"submit",className:"w-full",disabled:s,children:s?"Creating...":"Create Deck"})]})})]})}var u=a(9891),h=a(5814),f=a.n(h),g=a(7590);function j(){let[e,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(!0),[d,o]=(0,t.useState)(null),[p,h]=(0,t.useState)(!1),[j,y]=(0,t.useState)(null),[v,k]=(0,t.useState)(!1),b=async()=>{i(!0);try{let e=await (0,l.Br)();s(e),o(null)}catch(e){console.error("Error loading decks:",e),o("Failed to load decks. Please try again later.")}finally{i(!1)}},N=async e=>{try{return await (0,l.Ul)(e),g.Ay.success("Deck created successfully"),b(),Promise.resolve()}catch(e){return console.error("Error creating deck:",e),g.Ay.error("Failed to create deck"),Promise.reject(e)}},w=e=>{y(e),h(!0)},P=async(e,s)=>{k(!0);try{console.log(`Attempting to rename deck ${e} to "${s}"`);let a=await (0,l.Xj)(e,{name:s});return console.log("Rename success:",a),g.Ay.success("Deck renamed successfully"),b(),Promise.resolve()}catch(e){return console.error("Error renaming deck:",e),e instanceof Error?g.Ay.error(`Failed to rename deck: ${e.message}`):g.Ay.error("Failed to rename deck"),Promise.reject(e)}finally{k(!1)}};return(0,r.jsx)(n.$,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,r.jsxs)("div",{className:"md:w-1/3",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Decks"}),(0,r.jsx)(x,{onSubmit:N})]}),(0,r.jsxs)("div",{className:"md:w-2/3",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Your Decks"}),a?(0,r.jsx)("div",{className:"py-12 text-center",children:"Loading decks..."}):d?(0,r.jsx)("div",{className:"py-12 text-center text-red-500",children:d}):0===e.length?(0,r.jsx)("div",{className:"bg-blue-50 p-6 rounded-lg text-center",children:(0,r.jsx)("p",{children:"You haven't created any decks yet. Get started by creating your first deck!"})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,r.jsxs)(m.Zp,{className:"h-full flex flex-col",children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:e.name}),(0,r.jsx)(m.BT,{children:e.description||"No description provided"})]}),(0,r.jsx)(m.Wu,{className:"flex-grow",children:(0,r.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[e.cardCount," ",1===e.cardCount?"card":"cards"]})}),(0,r.jsxs)("div",{className:"p-4 pt-0 border-t mt-auto",children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,r.jsx)(f(),{href:`/decks/${e.id}`,className:"flex-1",children:(0,r.jsx)(c.$,{variant:"outline",className:"w-full",children:"Manage"})}),(0,r.jsx)(f(),{href:`/study/${e.id}`,className:"flex-1",children:(0,r.jsx)(c.$,{className:"w-full",children:"Study"})})]}),(0,r.jsx)(c.$,{variant:"ghost",className:"w-full text-sm",onClick:()=>w(e),children:"Rename"})]})]},e.id))})]})]}),j&&(0,r.jsx)(u.N,{deckId:j.id,currentName:j.name,isOpen:p,onClose:()=>{h(!1),y(null)},onRename:P})]})})}},5869:(e,s,a)=>{Promise.resolve().then(a.bind(a,409))},8234:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o});var r=a(5239),t=a(8088),n=a(8170),l=a.n(n),i=a(893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(s,d);let o={children:["",{children:["decks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,409)),"/Users/evangelosmeklis/hanzifive/src/app/decks/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,4431)),"/Users/evangelosmeklis/hanzifive/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/evangelosmeklis/hanzifive/src/app/decks/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/decks/page",pathname:"/decks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9485:(e,s,a)=>{Promise.resolve().then(a.bind(a,5119))},9551:e=>{"use strict";e.exports=require("url")},9891:(e,s,a)=>{"use strict";a.d(s,{N:()=>y});var r=a(687),t=a(3210),n=a(3442),l=a(7605),i=a(5880),d=a(9523),o=a(9101),c=a(4780);let m=o.bL;o.l9;let p=o.ZL;o.bm;let x=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(o.hJ,{ref:a,className:(0,c.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));x.displayName=o.hJ.displayName;let u=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(p,{children:[(0,r.jsx)(x,{}),(0,r.jsx)(o.UC,{ref:t,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:bg-gray-900 dark:border-gray-800 dark:text-white",e),...a,children:s})]}));u.displayName=o.UC.displayName;let h=({className:e,...s})=>(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});h.displayName="DialogHeader";let f=({className:e,...s})=>(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});f.displayName="DialogFooter";let g=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(o.hE,{ref:a,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));g.displayName=o.hE.displayName,t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(o.VY,{ref:a,className:(0,c.cn)("text-sm text-gray-500 dark:text-gray-400",e),...s})).displayName=o.VY.displayName;let j=i.z.object({name:i.z.string().min(1,"Deck name is required")});function y({deckId:e,currentName:s,isOpen:a,onClose:i,onRename:o}){let[c,p]=(0,t.useState)(!1),{register:x,handleSubmit:y,formState:{errors:v},reset:k}=(0,l.mN)({resolver:(0,n.u)(j),defaultValues:{name:s}}),b=async s=>{p(!0);try{await o(e,s.name),k(),i()}catch(e){console.error("Error renaming deck:",e)}finally{p(!1)}};return(0,r.jsx)(m,{open:a,onOpenChange:i,children:(0,r.jsxs)(u,{className:"sm:max-w-[425px]",children:[(0,r.jsx)(h,{children:(0,r.jsx)(g,{children:"Rename Deck"})}),(0,r.jsxs)("form",{onSubmit:y(b),children:[(0,r.jsx)("div",{className:"grid gap-4 py-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Deck Name"}),(0,r.jsx)("input",{id:"name",...x("name"),className:"w-full p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",placeholder:"Enter new deck name"}),v.name&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:v.name.message})]})}),(0,r.jsxs)(f,{children:[(0,r.jsx)(d.$,{type:"button",variant:"outline",onClick:i,children:"Cancel"}),(0,r.jsx)(d.$,{type:"submit",disabled:c,children:c?"Saving...":"Save Changes"})]})]})]})})}}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[447,838,687,454,105,101,267],()=>a(8234));module.exports=r})();