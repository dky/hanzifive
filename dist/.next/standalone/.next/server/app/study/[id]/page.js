(()=>{var e={};e.id=22,e.ids=[22],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},866:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/evangelosmeklis/hanzifive/src/app/study/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/evangelosmeklis/hanzifive/src/app/study/[id]/page.tsx","default")},2122:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(687),a=t(3210),n=t(6189),i=t(4074),l=t(2185),c=t(9523),d=t(4493);function o({id:e,character:s,pinyin:t,meaning:n,mode:i,onResult:l}){let o,x,[m,u]=(0,a.useState)(!1);switch(i){case"normal":o=(0,r.jsx)("div",{className:"text-6xl",children:s}),x=(0,r.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,r.jsx)("div",{className:"text-xl",children:t}),(0,r.jsx)("div",{className:"text-2xl",children:n})]});break;case"reverse":o=(0,r.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,r.jsx)("div",{className:"text-xl",children:t}),(0,r.jsx)("div",{className:"text-2xl",children:n})]}),x=(0,r.jsx)("div",{className:"text-6xl",children:s});break;case"meaningOnly":o=(0,r.jsx)("div",{className:"text-2xl",children:n}),x=(0,r.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,r.jsx)("div",{className:"text-6xl",children:s}),(0,r.jsx)("div",{className:"text-xl",children:t})]})}return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6 w-full max-w-lg",children:[(0,r.jsx)("div",{className:"w-full perspective-1000",children:(0,r.jsxs)("div",{className:`relative w-full h-80 cursor-pointer transition-transform duration-500 transform-style-3d ${m?"rotate-y-180":""}`,onClick:()=>u(!m),children:[(0,r.jsx)(d.Zp,{className:"absolute w-full h-full backface-hidden",children:(0,r.jsx)(d.Wu,{className:"flex items-center justify-center h-full",children:o})}),(0,r.jsx)(d.Zp,{className:"absolute w-full h-full backface-hidden rotate-y-180",children:(0,r.jsx)(d.Wu,{className:"flex items-center justify-center h-full",children:x})})]})}),m&&(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(c.$,{variant:"destructive",onClick:()=>l(!1),children:"Incorrect"}),(0,r.jsx)(c.$,{variant:"default",onClick:()=>l(!0),children:"Correct"})]})]})}function x({deck:e,flashcards:s,onComplete:t}){let[n,i]=(0,a.useState)(0),[l,x]=(0,a.useState)(0),[m,u]=(0,a.useState)(0),[h,p]=(0,a.useState)([]),[v,f]=(0,a.useState)("normal"),[j,g]=(0,a.useState)(!1),[y,N]=(0,a.useState)(!1),[b,k]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!0),C=async()=>{N(!0);try{await t(l,m)}catch(e){console.error("Error saving study session:",e)}finally{N(!1)}},P=e=>{console.log(`Setting mode to: ${e}`),f(e)};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)(d.Zp,{className:"mb-6",children:[(0,r.jsx)(d.aR,{children:(0,r.jsxs)(d.ZB,{children:["Studying: ",e.name]})}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description||"No description provided."})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,r.jsxs)(c.$,{variant:"normal"===v?"default":"outline",onClick:()=>P("normal"),disabled:y,children:["normal"===v?"✓ ":"","Normal Mode"]}),(0,r.jsxs)(c.$,{variant:"reverse"===v?"default":"outline",onClick:()=>P("reverse"),disabled:y,children:["reverse"===v?"✓ ":"","Reverse Mode"]}),(0,r.jsxs)(c.$,{variant:"meaningOnly"===v?"default":"outline",onClick:()=>P("meaningOnly"),disabled:y,children:["meaningOnly"===v?"✓ ":"","Meaning Only"]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:["normal"===v&&"Shows Chinese character first, guess the meaning.","reverse"===v&&"Shows meaning first, guess the Chinese character.","meaningOnly"===v&&"Shows meaning only, guess both character and pronunciation."]}),(0,r.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Progress:"})," ",n+1," / ",h.length]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-green-600",children:"Correct:"})," ",l]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-red-600",children:"Incorrect:"})," ",m]})]})]})]})]}),!j&&h.length>0?(0,r.jsx)("div",{className:"flex justify-center min-h-[400px]",children:b?(0,r.jsx)("div",{className:"flex items-center justify-center w-full max-w-lg",children:(0,r.jsx)("div",{className:"text-gray-500",children:"Loading next card..."})}):w?(0,r.jsx)(o,{id:h[n].id,character:h[n].character,pinyin:h[n].pinyin,meaning:h[n].meaning,mode:v,onResult:e=>{e?x(e=>e+1):u(e=>e+1),n<h.length-1?(k(!0),S(!1),setTimeout(()=>{i(e=>e+1),setTimeout(()=>{S(!0),k(!1)},50)},200)):g(!0)}}):null}):(0,r.jsx)(d.Zp,{children:(0,r.jsx)(d.Wu,{className:"py-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Session Complete!"}),(0,r.jsxs)("div",{className:"flex justify-center gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-green-600",children:l}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Correct"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-red-600",children:m}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Incorrect"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-4xl font-bold",children:[Math.round(l/(l+m||1)*100),"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Success Rate"})]})]}),(0,r.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,r.jsx)(c.$,{variant:"outline",onClick:()=>{p([...s].sort(()=>Math.random()-.5)),i(0),x(0),u(0),g(!1),S(!0)},disabled:y,children:"Restart Session"}),(0,r.jsx)(c.$,{onClick:C,disabled:y,children:y?"Saving...":"Save Results"})]})]})})})]})}var m=t(5814),u=t.n(m),h=t(7590);function p(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),t=e.id,[d,o]=(0,a.useState)(null),[m,p]=(0,a.useState)(!0),[v,f]=(0,a.useState)(null),j=async(e,r)=>{try{let a=localStorage.getItem("studyMode")||"normal";return await (0,l.kE)({deckId:t,correct:e,incorrect:r,studyMode:a}),h.Ay.success("Study session saved successfully"),s.push(`/decks/${t}/history`),Promise.resolve()}catch(e){return console.error("Error saving study session:",e),h.Ay.error("Failed to save study session"),Promise.reject(e)}};return m?(0,r.jsx)(i.$,{children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 text-center",children:"Loading deck information..."})}):v||!d?(0,r.jsx)(i.$,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("div",{className:"text-center text-red-500 mb-4",children:v||"Deck not found"}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(u(),{href:"/decks",children:(0,r.jsx)(c.$,{children:"Go back to decks"})})})]})}):(0,r.jsx)(i.$,{children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)(x,{deck:d,flashcards:d.flashcards,onComplete:j})})})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3632:(e,s,t)=>{Promise.resolve().then(t.bind(t,866))},3873:e=>{"use strict";e.exports=require("path")},4752:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d});var r=t(5239),a=t(8088),n=t(8170),i=t.n(n),l=t(893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d={children:["",{children:["study",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,866)),"/Users/evangelosmeklis/hanzifive/src/app/study/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"/Users/evangelosmeklis/hanzifive/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/evangelosmeklis/hanzifive/src/app/study/[id]/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/study/[id]/page",pathname:"/study/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7184:(e,s,t)=>{Promise.resolve().then(t.bind(t,2122))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,838,687,454,267],()=>t(4752));module.exports=r})();